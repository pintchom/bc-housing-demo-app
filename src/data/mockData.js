// ============================================================
// MOCK DATA - BC Housing Platform (Hatchery)
// All data is hardcoded for prototype purposes
// ============================================================

// ---------- USERS ----------
export const mockUsers = [
  {
    id: 1,
    firstName: 'Sarah',
    lastName: 'Chen',
    email: 'chen.sarah@bc.edu',
    role: 'student',
    year: 'Junior',
    major: 'Computer Science',
    bio: 'Junior CS major looking for summer subletters for my Comm Ave apartment. Clean, quiet, and pet-friendly!',
    phone: '(617) 555-0101',
    profileImage: 'https://i.pravatar.cc/150?img=1',
    verified: true,
    avgRating: 4.8,
    numRatings: 12,
    joinedDate: '2024-09-01',
  },
  {
    id: 2,
    firstName: 'James',
    lastName: 'Murphy',
    email: 'murphy.james@bc.edu',
    role: 'student',
    year: 'Senior',
    major: 'Finance',
    bio: 'Senior finance student graduating in May. Great apartment available for summer sublet near Cleveland Circle.',
    phone: '(617) 555-0102',
    profileImage: 'https://i.pravatar.cc/150?img=3',
    verified: true,
    avgRating: 4.5,
    numRatings: 8,
    joinedDate: '2024-08-15',
  },
  {
    id: 3,
    firstName: 'Maria',
    lastName: 'Santos',
    email: 'santos.maria@bc.edu',
    role: 'student',
    year: 'Sophomore',
    major: 'Biology',
    bio: 'Looking for affordable summer housing near BC campus. Non-smoker, clean, and studious.',
    phone: '(617) 555-0103',
    profileImage: 'https://i.pravatar.cc/150?img=5',
    verified: true,
    avgRating: 4.9,
    numRatings: 3,
    joinedDate: '2025-01-10',
  },
  {
    id: 4,
    firstName: 'Alex',
    lastName: 'Kim',
    email: 'kim.alex@bc.edu',
    role: 'student',
    year: 'Graduate',
    major: 'MBA',
    bio: 'MBA candidate with a great apartment in Brighton. Looking for responsible summer subletters.',
    phone: '(617) 555-0104',
    profileImage: 'https://i.pravatar.cc/150?img=8',
    verified: true,
    avgRating: 4.7,
    numRatings: 15,
    joinedDate: '2024-06-01',
  },
  {
    id: 5,
    firstName: 'Emily',
    lastName: 'O\'Brien',
    email: 'obrien.emily@bc.edu',
    role: 'student',
    year: 'Junior',
    major: 'Nursing',
    bio: 'Nursing student looking for a quiet place for the summer while I do clinicals at BC.',
    phone: '(617) 555-0105',
    profileImage: 'https://i.pravatar.cc/150?img=9',
    verified: true,
    avgRating: 5.0,
    numRatings: 2,
    joinedDate: '2025-02-01',
  },
  {
    id: 6,
    firstName: 'Admin',
    lastName: 'User',
    email: 'admin@bc.edu',
    role: 'admin',
    year: null,
    major: null,
    bio: 'Platform administrator',
    phone: '(617) 555-0100',
    profileImage: 'https://i.pravatar.cc/150?img=12',
    verified: true,
    avgRating: null,
    numRatings: 0,
    joinedDate: '2024-01-01',
  },
];

// ---------- LISTINGS ----------
export const mockListings = [
  {
    id: 1,
    ownerId: 1,
    title: 'Sunny 2BR on Comm Ave - Perfect for Summer',
    description: 'Spacious 2-bedroom apartment on Commonwealth Avenue, just a 10-minute walk to BC campus. The apartment features hardwood floors, large windows with tons of natural light, a fully equipped kitchen, and in-unit laundry. Perfect for students looking for summer housing near campus.',
    address: '1945 Commonwealth Ave',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3398,
    lng: -71.1528,
    propertyType: 'Apartment',
    bedrooms: 2,
    bathrooms: 1,
    sqft: 850,
    monthlyRent: 2200,
    utilitiesIncluded: false,
    estimatedUtilities: 150,
    securityDeposit: 2200,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Sublease',
    availableFrom: '2026-05-15',
    availableTo: '2026-08-31',
    landlordApprovalRequired: true,
    status: 'available',
    parking: true,
    shared: false,
    petsAllowed: true,
    hasStairs: true,
    floor: 3,
    furnished: true,
    laundry: 'In-Unit',
    amenities: ['Hardwood Floors', 'Natural Light', 'Kitchen', 'Laundry', 'Near T Stop'],
    rules: ['No Smoking', 'No Parties', 'Quiet Hours 10pm-8am'],
    requirements: ['Non-smoker', 'BC Student'],
    images: [
      'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800',
      'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800',
      'https://images.unsplash.com/photo-1484154218962-a197022b5858?w=800',
    ],
    verified: true,
    createdAt: '2026-02-01',
    views: 234,
  },
  {
    id: 2,
    ownerId: 2,
    title: 'Cozy Studio near Cleveland Circle',
    description: 'Charming studio apartment steps from Cleveland Circle T station. Recently renovated with modern finishes, granite counters, and stainless steel appliances. Heat and hot water included in rent. Ideal for a single student looking for an affordable summer option.',
    address: '52 Chestnut Hill Ave',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3365,
    lng: -71.1495,
    propertyType: 'Studio',
    bedrooms: 0,
    bathrooms: 1,
    sqft: 450,
    monthlyRent: 1600,
    utilitiesIncluded: true,
    estimatedUtilities: 0,
    securityDeposit: 1600,
    brokerFee: 0,
    applicationFee: 25,
    leaseType: 'Sublease',
    availableFrom: '2026-06-01',
    availableTo: '2026-08-15',
    landlordApprovalRequired: false,
    status: 'available',
    parking: false,
    shared: false,
    petsAllowed: false,
    hasStairs: true,
    floor: 2,
    furnished: true,
    laundry: 'In-Building',
    amenities: ['Renovated', 'Granite Counters', 'Near T Stop', 'Heat Included'],
    rules: ['No Smoking', 'No Pets'],
    requirements: ['Non-smoker', 'BC Student', 'Quiet'],
    images: [
      'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800',
      'https://images.unsplash.com/photo-1630699144867-37acec97df5a?w=800',
    ],
    verified: true,
    createdAt: '2026-02-05',
    views: 187,
  },
  {
    id: 3,
    ownerId: 4,
    title: 'Large 3BR House - Great for Group',
    description: 'Beautiful 3-bedroom house in Brighton with a backyard and driveway parking. Spacious living room, updated kitchen, and two full bathrooms. Perfect for a group of friends looking to sublet for the summer. Walking distance to BC shuttle stop.',
    address: '78 Foster St',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3490,
    lng: -71.1580,
    propertyType: 'House',
    bedrooms: 3,
    bathrooms: 2,
    sqft: 1400,
    monthlyRent: 3600,
    utilitiesIncluded: false,
    estimatedUtilities: 250,
    securityDeposit: 3600,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Sublease',
    availableFrom: '2026-05-20',
    availableTo: '2026-08-31',
    landlordApprovalRequired: true,
    status: 'available',
    parking: true,
    shared: false,
    petsAllowed: true,
    hasStairs: false,
    floor: 1,
    furnished: false,
    laundry: 'In-Unit',
    amenities: ['Backyard', 'Driveway Parking', 'Updated Kitchen', 'Near Shuttle'],
    rules: ['No Smoking Indoors', 'Lawn Maintenance Required'],
    requirements: ['BC Students Only'],
    images: [
      'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800',
      'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800',
      'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800',
    ],
    verified: true,
    createdAt: '2026-01-28',
    views: 312,
  },
  {
    id: 4,
    ownerId: 1,
    title: 'Private Room in 4BR - South Street',
    description: 'One private bedroom available in a shared 4-bedroom apartment on South Street. Room comes furnished with a bed, desk, and dresser. Shared kitchen, living room, and bathroom with 3 other BC students. Great community vibe!',
    address: '210 South St',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3360,
    lng: -71.1630,
    propertyType: 'Room',
    bedrooms: 1,
    bathrooms: 1,
    sqft: 180,
    monthlyRent: 950,
    utilitiesIncluded: true,
    estimatedUtilities: 0,
    securityDeposit: 950,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Sublease',
    availableFrom: '2026-06-01',
    availableTo: '2026-08-01',
    landlordApprovalRequired: false,
    status: 'available',
    parking: false,
    shared: true,
    petsAllowed: false,
    hasStairs: true,
    floor: 2,
    furnished: true,
    laundry: 'In-Building',
    amenities: ['Furnished', 'Utilities Included', 'Shared Kitchen', 'Near Bus'],
    rules: ['No Smoking', 'Shared Space Respect', 'Quiet Hours 11pm-7am'],
    requirements: ['BC Student', 'Non-smoker', 'Clean'],
    images: [
      'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=800',
      'https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=800',
    ],
    verified: false,
    createdAt: '2026-02-10',
    views: 145,
  },
  {
    id: 5,
    ownerId: 4,
    title: 'Modern 1BR - Lake Street',
    description: 'Sleek, modern 1-bedroom apartment on Lake Street. Recently built with contemporary finishes throughout. Open concept living area, quartz countertops, stainless appliances, and in-unit washer/dryer. Steps from the B-line.',
    address: '15 Lake St',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3410,
    lng: -71.1555,
    propertyType: 'Apartment',
    bedrooms: 1,
    bathrooms: 1,
    sqft: 650,
    monthlyRent: 1900,
    utilitiesIncluded: false,
    estimatedUtilities: 120,
    securityDeposit: 1900,
    brokerFee: 0,
    applicationFee: 50,
    leaseType: 'Short-term',
    availableFrom: '2026-06-01',
    availableTo: '2026-07-31',
    landlordApprovalRequired: false,
    status: 'available',
    parking: false,
    shared: false,
    petsAllowed: false,
    hasStairs: false,
    floor: 1,
    furnished: true,
    laundry: 'In-Unit',
    amenities: ['Modern Build', 'Quartz Counters', 'Elevator', 'Near T Stop', 'Central AC'],
    rules: ['No Smoking', 'No Pets'],
    requirements: ['BC Student'],
    images: [
      'https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=800',
      'https://images.unsplash.com/photo-1536376072261-38c75010e6c9?w=800',
    ],
    verified: true,
    createdAt: '2026-02-08',
    views: 198,
  },
  {
    id: 6,
    ownerId: 2,
    title: 'Affordable 2BR - Sutherland Rd',
    description: 'Budget-friendly 2-bedroom on Sutherland Road. A bit older but well-maintained. Close to campus and public transit. Looking for two responsible students to sublet for the full summer. Landlord is BC-friendly.',
    address: '42 Sutherland Rd',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3385,
    lng: -71.1510,
    propertyType: 'Apartment',
    bedrooms: 2,
    bathrooms: 1,
    sqft: 780,
    monthlyRent: 1800,
    utilitiesIncluded: false,
    estimatedUtilities: 130,
    securityDeposit: 1800,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Sublease',
    availableFrom: '2026-05-15',
    availableTo: '2026-08-31',
    landlordApprovalRequired: true,
    status: 'pending',
    parking: true,
    shared: false,
    petsAllowed: true,
    hasStairs: true,
    floor: 2,
    furnished: false,
    laundry: 'In-Building',
    amenities: ['Near Campus', 'Near T Stop', 'Street Parking'],
    rules: ['No Smoking'],
    requirements: ['BC Student'],
    images: [
      'https://images.unsplash.com/photo-1560185007-cde436f6a4d0?w=800',
      'https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=800',
    ],
    verified: false,
    createdAt: '2026-02-12',
    views: 89,
  },
  {
    id: 7,
    ownerId: 1,
    title: 'Charming 1BR - Beacon Street',
    description: 'Beautiful 1-bedroom apartment on Beacon Street with stunning views. Hardwood floors throughout, bay windows, decorative fireplace. Just two blocks from the C-line. Perfect for a single student who values character and location.',
    address: '1650 Beacon St',
    city: 'Brookline',
    state: 'MA',
    zip: '02445',
    lat: 42.3400,
    lng: -71.1420,
    propertyType: 'Apartment',
    bedrooms: 1,
    bathrooms: 1,
    sqft: 580,
    monthlyRent: 2100,
    utilitiesIncluded: false,
    estimatedUtilities: 100,
    securityDeposit: 2100,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Full Lease',
    availableFrom: '2026-09-01',
    availableTo: '2027-08-31',
    landlordApprovalRequired: true,
    status: 'available',
    parking: false,
    shared: false,
    petsAllowed: false,
    hasStairs: true,
    floor: 3,
    furnished: false,
    laundry: 'In-Building',
    amenities: ['Bay Windows', 'Hardwood Floors', 'Fireplace', 'Near T Stop'],
    rules: ['No Smoking', 'No Pets', 'No Loud Music'],
    requirements: ['BC Student or Alumni'],
    images: [
      'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=800',
      'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800',
    ],
    verified: true,
    createdAt: '2026-01-15',
    views: 276,
  },
  {
    id: 8,
    ownerId: 4,
    title: 'Spacious 2BR with Deck - Chestnut Hill',
    description: 'Gorgeous 2-bedroom apartment in Chestnut Hill with a private deck overlooking a tree-lined street. Modern kitchen, spacious bedrooms, lots of closet space. Quiet neighborhood perfect for studying.',
    address: '95 Chestnut Hill Ave',
    city: 'Brighton',
    state: 'MA',
    zip: '02135',
    lat: 42.3345,
    lng: -71.1475,
    propertyType: 'Apartment',
    bedrooms: 2,
    bathrooms: 1,
    sqft: 900,
    monthlyRent: 2500,
    utilitiesIncluded: false,
    estimatedUtilities: 140,
    securityDeposit: 2500,
    brokerFee: 0,
    applicationFee: 0,
    leaseType: 'Sublease',
    availableFrom: '2026-05-15',
    availableTo: '2026-08-15',
    landlordApprovalRequired: true,
    status: 'rented',
    parking: true,
    shared: false,
    petsAllowed: false,
    hasStairs: true,
    floor: 2,
    furnished: true,
    laundry: 'In-Building',
    amenities: ['Private Deck', 'Modern Kitchen', 'Closet Space', 'Quiet Street'],
    rules: ['No Smoking', 'No Pets'],
    requirements: ['BC Student'],
    images: [
      'https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800',
      'https://images.unsplash.com/photo-1600573472556-e636c2acda9e?w=800',
    ],
    verified: true,
    createdAt: '2026-01-20',
    views: 389,
  },
];

// ---------- APPLICATIONS ----------
export const mockApplications = [
  {
    id: 1,
    listingId: 1,
    applicantId: 3,
    message: 'Hi Sarah! I\'m a sophomore biology major looking for summer housing while I do research on campus. I\'m very clean and quiet. Would love to chat about the apartment!',
    requestedFrom: '2026-05-15',
    requestedTo: '2026-08-31',
    status: 'pending',
    createdAt: '2026-02-15',
  },
  {
    id: 2,
    listingId: 1,
    applicantId: 5,
    message: 'Hello! I\'m a nursing student staying at BC for summer clinicals. Your place looks perfect - I\'m a non-smoker and very respectful of space. Let me know if you\'d like to meet up!',
    requestedFrom: '2026-05-15',
    requestedTo: '2026-07-31',
    status: 'pending',
    createdAt: '2026-02-16',
  },
  {
    id: 3,
    listingId: 3,
    applicantId: 3,
    message: 'This house looks amazing! My friends and I (3 BC students) are looking for summer housing. We\'re all clean, responsible, and respectful. Can we schedule a viewing?',
    requestedFrom: '2026-05-20',
    requestedTo: '2026-08-31',
    status: 'accepted',
    createdAt: '2026-02-10',
  },
  {
    id: 4,
    listingId: 5,
    applicantId: 5,
    message: 'Love the modern finishes! I\'m interested in the July sublet. I\'m a quiet nursing student. Would this work for just the one month?',
    requestedFrom: '2026-07-01',
    requestedTo: '2026-07-31',
    status: 'declined',
    createdAt: '2026-02-12',
  },
  {
    id: 5,
    listingId: 8,
    applicantId: 3,
    message: 'The deck is exactly what I\'ve been looking for! I\'m a responsible, non-smoking BC student. Is the apartment still available for the full summer?',
    requestedFrom: '2026-05-15',
    requestedTo: '2026-08-15',
    status: 'accepted',
    createdAt: '2026-01-25',
  },
  {
    id: 6,
    listingId: 2,
    applicantId: 3,
    message: 'Hi James, the studio looks great and the price is perfect for my budget. I\'m a quiet student who mainly studies. Would love to see it!',
    requestedFrom: '2026-06-01',
    requestedTo: '2026-08-15',
    status: 'pending',
    createdAt: '2026-02-18',
  },
];

// ---------- FAVORITES ----------
export const mockFavorites = [
  { userId: 3, listingId: 1 },
  { userId: 3, listingId: 2 },
  { userId: 3, listingId: 5 },
  { userId: 5, listingId: 1 },
  { userId: 5, listingId: 3 },
  { userId: 5, listingId: 7 },
];

// ---------- REVIEWS ----------
export const mockReviews = [
  {
    id: 1,
    reviewerId: 3,
    reviewedUserId: 4,
    listingId: 8,
    rating: 5,
    comment: 'Alex was an amazing landlord! The apartment was exactly as described, and he was super responsive to any questions. Highly recommend!',
    createdAt: '2025-09-01',
  },
  {
    id: 2,
    reviewerId: 4,
    reviewedUserId: 3,
    listingId: 8,
    rating: 5,
    comment: 'Maria was a fantastic subtenant. Left the place spotless and was always on time with rent. Would sublet to her again!',
    createdAt: '2025-09-02',
  },
  {
    id: 3,
    reviewerId: 5,
    reviewedUserId: 1,
    listingId: 4,
    rating: 4,
    comment: 'Sarah\'s place was great. Room was as described. Only minor issue was the shared bathroom schedule, but we worked it out.',
    createdAt: '2025-08-20',
  },
  {
    id: 4,
    reviewerId: 1,
    reviewedUserId: 5,
    listingId: 4,
    rating: 5,
    comment: 'Emily was a wonderful roommate. Very respectful, clean, and friendly. Would love to have her again!',
    createdAt: '2025-08-21',
  },
];

// ---------- MESSAGES ----------
export const mockMessages = [
  {
    id: 1,
    senderId: 3,
    receiverId: 1,
    listingId: 1,
    content: 'Hi Sarah! I submitted an application for your Comm Ave apartment. Would you be available to chat this week?',
    timestamp: '2026-02-15T14:30:00',
    read: true,
  },
  {
    id: 2,
    senderId: 1,
    receiverId: 3,
    listingId: 1,
    content: 'Hi Maria! Thanks for your interest. I\'d love to chat. Are you free Thursday afternoon?',
    timestamp: '2026-02-15T16:45:00',
    read: true,
  },
  {
    id: 3,
    senderId: 3,
    receiverId: 1,
    listingId: 1,
    content: 'Thursday works great! How about 3pm at the Chocolate Bar?',
    timestamp: '2026-02-15T17:00:00',
    read: true,
  },
  {
    id: 4,
    senderId: 1,
    receiverId: 3,
    listingId: 1,
    content: 'Perfect! See you there. Bring any questions you have about the apartment.',
    timestamp: '2026-02-15T17:15:00',
    read: false,
  },
  {
    id: 5,
    senderId: 5,
    receiverId: 1,
    listingId: 1,
    content: 'Hey Sarah, just applied for your apartment. I\'m doing summer clinicals and would take great care of the place!',
    timestamp: '2026-02-16T10:00:00',
    read: true,
  },
  {
    id: 6,
    senderId: 1,
    receiverId: 5,
    listingId: 1,
    content: 'Thanks Emily! I\'ll review your application and get back to you soon.',
    timestamp: '2026-02-16T12:30:00',
    read: false,
  },
  {
    id: 7,
    senderId: 3,
    receiverId: 4,
    listingId: 3,
    content: 'Hi Alex! We\'re excited about the house on Foster St. When can we schedule a viewing?',
    timestamp: '2026-02-10T09:00:00',
    read: true,
  },
  {
    id: 8,
    senderId: 4,
    receiverId: 3,
    listingId: 3,
    content: 'Hey Maria! How about this Saturday at 11am? I can show you around the whole place.',
    timestamp: '2026-02-10T11:00:00',
    read: true,
  },
];

// ---------- ADMIN STATS ----------
export const mockAdminStats = {
  totalListings: 8,
  activeListings: 6,
  pendingListings: 1,
  rentedListings: 1,
  totalUsers: 6,
  verifiedUsers: 6,
  totalApplications: 6,
  pendingApplications: 3,
  acceptedApplications: 2,
  declinedApplications: 1,
  avgRent: 2081,
  reportsToReview: 2,
};

// ---------- REPORTS (for admin) ----------
export const mockReports = [
  {
    id: 1,
    reporterId: 3,
    type: 'listing',
    targetId: 6,
    reason: 'Listing photos look outdated and may not reflect current condition.',
    status: 'pending',
    createdAt: '2026-02-14',
  },
  {
    id: 2,
    reporterId: 5,
    type: 'user',
    targetId: 2,
    reason: 'User did not respond to messages after accepting application.',
    status: 'pending',
    createdAt: '2026-02-17',
  },
];

// Helper to get user by ID
export const getUserById = (id) => mockUsers.find(u => u.id === id);

// Helper to get listings by owner
export const getListingsByOwner = (ownerId) => mockListings.filter(l => l.ownerId === ownerId);

// Helper to get applications for a listing
export const getApplicationsForListing = (listingId) => mockApplications.filter(a => a.listingId === listingId);

// Helper to get applications by user
export const getApplicationsByUser = (userId) => mockApplications.filter(a => a.applicantId === userId);

// Helper to get favorites for a user
export const getFavoriteListings = (userId) => {
  const favIds = mockFavorites.filter(f => f.userId === userId).map(f => f.listingId);
  return mockListings.filter(l => favIds.includes(l.id));
};

// Helper to get reviews for a user
export const getReviewsForUser = (userId) => mockReviews.filter(r => r.reviewedUserId === userId);

// Helper to get messages between two users
export const getConversation = (userId1, userId2) =>
  mockMessages.filter(
    m => (m.senderId === userId1 && m.receiverId === userId2) ||
         (m.senderId === userId2 && m.receiverId === userId1)
  ).sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

// Helper to get all conversations for a user (grouped by other user)
export const getConversationsForUser = (userId) => {
  const userMessages = mockMessages.filter(m => m.senderId === userId || m.receiverId === userId);
  const otherUserIds = [...new Set(userMessages.map(m => m.senderId === userId ? m.receiverId : m.senderId))];
  return otherUserIds.map(otherId => {
    const msgs = getConversation(userId, otherId);
    const lastMsg = msgs[msgs.length - 1];
    const unread = msgs.filter(m => m.receiverId === userId && !m.read).length;
    return {
      otherUserId: otherId,
      otherUser: getUserById(otherId),
      lastMessage: lastMsg,
      unreadCount: unread,
      messages: msgs,
    };
  }).sort((a, b) => new Date(b.lastMessage.timestamp) - new Date(a.lastMessage.timestamp));
};
